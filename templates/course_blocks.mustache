{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template theme_academi/course_blocks

    Academi course blocks template.
    Example context (json):
    {
        "sitename": "Moodle",
        "output": {
            "doctype": "<!DOCTYPE html>",
            "page_title": "course blocks page",
            "main_content": "<h1>Headings make html validators happier</h1>"
        },
        "bodyattributes":"",
        "availablecourses": "true",
        "promatedcourse": "true",
        "promotedtitle": "promoted courses"
    }
}}

{{! Overview }}
{{#overview}}
    <div class="overview mt-6">
        <div>
            <h2 class="text-dark fw-bold user-name">Hi {{username}},</h2>   
            <p class="text-dark platform-overview">Platform Overview</p>   
        </div>
        <div class="d-flex mt-3">
            {{#isadmin}}
            <div class="bg-light border p-3 w-25 rounded">
                <div>Active Schools</div>
                <div class="">{{totalschoolcount}}</div>
            </div>
            {{/isadmin}}
            <div class="bg-light border p-3 w-25 ml-3 rounded">
                <div>Enrolled Teachers</div>
                <div class="">{{enrolledteacherscount}}</div>
            </div>
            <div class="bg-light border p-3 w-25 ml-3 rounded">
                <div>Enrolled Students</div>
                <div class="">{{enrolledstudentscount}}</div>
            </div>
            {{#isprincipal}}
            <div class="bg-light border p-3 w-25 ml-3 rounded">
                <div>Running Courses</div>
                <div class="">{{coursescount}}</div>
            </div>
            {{/isprincipal}}

            {{#isadmin}}
            <div class="bg-light border p-3 w-25 ml-3 rounded">
                <div>
                    Active Surveys
                </div>
                <div class="">{{surveycount}}</div>
            </div>
            {{/isadmin}}

            {{#isprincipal}}
            <div class="bg-light border p-3 w-25 ml-3 rounded">
                <div>
                    Running Surveys
                </div>
                <div class="">{{surveycount}}</div>
            </div>
            {{/isprincipal}}
            
        </div>
    </div>
{{/overview}}

{{! Quick Actions }}
{{#quickaction}}
    <div class="quick-action mt-6">
        <p class="text-dark platform-overview mb-2">Quick Actions</p>
        <div class="d-flex">
            {{#cancreatenewschool}}
            <a class="create-custom-button mt-3 mr-3" href="{{createnewschool}}">{{{plusicon}}} Add New School</a>
            {{/cancreatenewschool}}
            {{#cancreatenewcourse}}
            <a class="create-custom-button mt-3 mr-3" href="{{createnewcourseurl}}">{{{plusicon}}} Create new course</a>
            {{/cancreatenewcourse}}
            {{#cancreatenewsurvey}}
            <a class="create-custom-button mt-3 mr-3" href="{{createsurveyurl}}">{{{plusicon}}} Create new survey</a>
            {{/cancreatenewsurvey}}
        </div>
    </div>
{{/quickaction}}

{{! Course Insights }}
{{#insights}}
    <div class="prominent-insights mt-6">
        <div class="d-flex justify-content-between">
            <div>
                <p class="text-dark prominent-insights-title">Prominent Insights</p>   
                {{#isprincipal}}
                <p class="text-dark prominent-description m-0">Based on the responses collected from surveys distributed in your school</p>   
                {{/isprincipal}}
                {{^isprincipal}}
                <p class="text-dark prominent-description m-0">Based on the responses collected from surveys filled by you</p>   
                {{/isprincipal}}
            </div>
            <div class="d-flex chart-type-select">
                {{{ insightstypes }}}
                {{{ surveycatgories }}}
            </div>
        </div>
            <div class="chart mt-4 border border-secondary rounded py-3">
                <div class="d-flex align-items-center pie-chart-header">
                    <h5 class="text-dark overall-insights-text">Overall Insights</h5>
                    {{{ piechartlabels }}}
                </div>
                {{#chart}}
                    <div class="mt-4 d-flex flex-wrap pie-chart-container">
                        {{{ chart }}}
                    </div>
                {{/chart}}
                {{#nodatafound}}
                    <div class="mt-4 d-flex flex-wrap pie-chart-container justify-content-center">
                        {{{ nodatafound }}}
                    </div>
                {{/nodatafound}}
            </div>
        </div>
    </div>
{{/insights}}